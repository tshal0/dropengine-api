{
	"info": {
		"_postman_id": "e9ae99d1-8098-4666-93d2-f992c9ca1004",
		"name": "drop-engine-api",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "users",
			"item": [
				{
					"name": "FindById",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "c0af603a-29bd-4622-bc92-11df2c0d4a11"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Activate",
					"request": {
						"method": "PATCH",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v2/users/:id/activate",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v2",
								"users",
								":id",
								"activate"
							],
							"variable": [
								{
									"key": "id",
									"value": "98cdd307-c6c6-47f5-a42b-b7a2807a8fa6"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "SignUp",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"email\": \"test@sample.com\",\r\n    \"password\": \"password123!\",\r\n    \"firstName\": \"Test\",\r\n    \"lastName\": \"Sample\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "8a05fa21-11e2-4555-9ff4-507e76ed78c6"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindUserByEmail",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v2/users?email=test@example.com",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v2",
								"users"
							],
							"query": [
								{
									"key": "email",
									"value": "test@example.com"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "All",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"users"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "productTypes",
			"item": [
				{
					"name": "FindByUuid",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/productTypes/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"productTypes",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "974f029d-7ef4-4c57-a25a-bfbaae8ae897"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"2DMetalArt\",\r\n    \"productionData\": {\r\n        \"material\": \"Mild Steel\",\r\n        \"thickness\": \"0.06\",\r\n        \"route\": \"1\"\r\n    },\r\n    \"option1\": {\r\n        \"name\": \"Color\",\r\n        \"values\": [\r\n            {\r\n                \"name\": \"Color\",\r\n                \"value\": \"Black\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Color\",\r\n                \"value\": \"White\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Color\",\r\n                \"value\": \"Gold\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Color\",\r\n                \"value\": \"Copper\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Color\",\r\n                \"value\": \"Silver\",\r\n                \"enabled\": true\r\n            }\r\n        ]\r\n    },\r\n    \"option2\": {\r\n        \"name\": \"Size\",\r\n        \"values\": [\r\n            {\r\n                \"name\": \"Size\",\r\n                \"value\": \"12\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Size\",\r\n                \"value\": \"15\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Size\",\r\n                \"value\": \"18\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Size\",\r\n                \"value\": \"24\",\r\n                \"enabled\": true\r\n            },\r\n            {\r\n                \"name\": \"Size\",\r\n                \"value\": \"30\",\r\n                \"enabled\": true\r\n            }\r\n        ]\r\n    },\r\n    \"option3\": null,\r\n    \"livePreview\": null\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{baseUrl}}/api/productTypes",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"productTypes"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/productTypes/:id",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"productTypes",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "cc21f7c5-1596-48c3-b550-e61a32c52add"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindById",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/v2/productTypes?id=1",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"v2",
								"productTypes"
							],
							"query": [
								{
									"key": "id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "All",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{baseUrl}}/api/productTypes",
							"host": [
								"{{baseUrl}}"
							],
							"path": [
								"api",
								"productTypes"
							]
						}
					},
					"response": []
				},
				{
					"name": "Rename",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"asdf\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/productTypes/:id/rename",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productTypes",
								":id",
								"rename"
							],
							"variable": [
								{
									"key": "id",
									"value": "974f029d-7ef4-4c57-a25a-bfbaae8ae897"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "products",
			"item": [
				{
					"name": "FindByUuid",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/products/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "efa5f79b-ccf3-4ad4-8ce0-68987ca5918c"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Create",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"productTypeId\": \"00000000-0000-0000-0000-000000000001\",\r\n    \"sku\": \"MEM-000-01\",\r\n    \"tags\": \"\",\r\n    \"categories\": \"\",\r\n    \"image\": \"\",\r\n    \"svg\": \"\",\r\n    \"customOptions\": [\r\n        {\r\n            \"name\": \"name\",\r\n            \"label\": \"Name\",\r\n            \"placeholder\": \"Enter up to 20 characters\",\r\n            \"required\": true,\r\n            \"type\": \"input\",\r\n            \"maxLength\": 20,\r\n            \"pattern\": \"^[a-zA-Z0-9\\\\s.,'/&]*\"\r\n        },\r\n        {\r\n            \"name\": \"initial\",\r\n            \"label\": \"Initial\",\r\n            \"placeholder\": \"Select your initial here\",\r\n            \"required\": true,\r\n            \"type\": \"dropdown\",\r\n            \"options\": \"A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z\"\r\n        }\r\n    ],\r\n    \"variants\": []\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/products/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "f03d82be-427a-499c-8dae-0ae967843130"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindById",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v2/products?id=1",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v2",
								"products"
							],
							"query": [
								{
									"key": "id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "All",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Rename",
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"name\": \"asdf\"\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/productTypes/:id/rename",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productTypes",
								":id",
								"rename"
							],
							"variable": [
								{
									"key": "id",
									"value": "974f029d-7ef4-4c57-a25a-bfbaae8ae897"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "UpdateCustomOptions",
					"request": {
						"method": "PATCH",
						"header": []
					},
					"response": []
				},
				{
					"name": "ImportProductCsv",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/DE/projects/drop-engine-api/e2e/fixtures/2022_03_01_products.v1.csv"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/products/import",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"products",
								"import"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "shopify",
			"item": [
				{
					"name": "Connect",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/shopify?shop=de-template-local&timestamp={{$timestamp}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"shopify"
							],
							"query": [
								{
									"key": "shop",
									"value": "de-template-local"
								},
								{
									"key": "timestamp",
									"value": "{{$timestamp}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "AcceptInstall",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/shopify/accept",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"shopify",
								"accept"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Shopify Account",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/shopify/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"shopify",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "53d354d6-bbcb-4b13-b642-13b13c6b6401"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get All",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/shopify",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"shopify"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/shopify/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"shopify",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "955f54fe-f43f-43d1-a6ad-9690dd84f2c3"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "productVariants",
			"item": [
				{
					"name": "Create",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\r\n    \"productId\": \"7c119f4c-1432-47bd-9273-0972d35f75f8\",\r\n    \"image\":\"\",\r\n    \"sku\": \"MEM-000-01-15-Black\",\r\n    \"option1\": {\r\n        \"name\": \"Size\",\r\n        \"option\": \"15\"\r\n    },\r\n    \"option2\": {\r\n        \"name\": \"Color\",\r\n        \"option\": \"Black\"\r\n    }\r\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/productVariants",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/productVariants/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "ab0d7bf2-cbd9-45d8-9c00-f89f18db4dae"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindByUuid",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/productVariants/:uuid",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants",
								":uuid"
							],
							"variable": [
								{
									"key": "uuid",
									"value": "ab0d7bf2-cbd9-45d8-9c00-f89f18db4dae"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindById",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/productVariants/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": null
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "FindBySku",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/productVariants/MEM-000-01-12-Black",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants",
								"MEM-000-01-12-Black"
							]
						}
					},
					"response": []
				},
				{
					"name": "ImportVariantCsv",
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "file",
									"type": "file",
									"src": "/C:/DE/projects/drop-engine-api/e2e/fixtures/2022_03_01_variants.v1.csv"
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/api/productVariants/import",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"productVariants",
								"import"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Health",
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}",
					"host": [
						"{{base_url}}"
					]
				}
			},
			"response": []
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{auth0_access_token}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"const access_token = pm.environment.get('auth0_access_token');",
					"const expiry = pm.environment.get('auth0_access_token_expiration');",
					"const limitDate = new Date(new Date().getTime() - (12 * 60 * 60 * 1000));",
					"const expiryDate = Date.parse(expiry)",
					"console.warn({ limitDate, expiryDate, expiry })",
					"if (!expiryDate || expiryDate < limitDate || expiryDate && !access_token?.length) {",
					"    console.warn(`No Access Token. Loading new one now...`)",
					"    const domain = pm.environment.get('auth0_domain')",
					"    const authUrl = pm.environment.get('auth0_authUrl').replace('{{auth0_domain}}', domain)",
					"    const tokenUrl = pm.environment.get('auth0_access_token_url').replace('{{auth0_domain}}', domain)",
					"    pm.environment.set('auth0_authUrl', authUrl)",
					"    pm.environment.set('auth0_access_token_url', tokenUrl)",
					"    const client_id = pm.environment.get('auth0_client_id')",
					"    const client_secret = pm.environment.get('auth0_client_secret')",
					"    const audience = pm.environment.get('auth0_audience')",
					"    const username = pm.environment.get('auth0_user')",
					"    const password = pm.environment.get('auth0_password')",
					"    const scope = pm.environment.get('auth0_scope')",
					"    const grant_type = 'password'",
					"    const authPayload = {",
					"        \"client_id\": client_id,",
					"        \"client_secret\": client_secret,",
					"        \"audience\": audience,",
					"        \"username\": username,",
					"        \"password\": password,",
					"        \"scope\": scope,",
					"        \"grant_type\": grant_type,",
					"    }",
					"",
					"    const authTokenUrl = pm.environment.get('auth0_access_token_url')",
					"    console.log(authTokenUrl)",
					"    const options = {",
					"        url: authTokenUrl,",
					"        method: 'POST',",
					"        header: { 'content-type': 'application/json' },",
					"        body: {",
					"            mode: 'raw',",
					"            raw: JSON.stringify(authPayload)",
					"",
					"        }",
					"    };",
					"    console.warn(authPayload, authTokenUrl)",
					"    pm.sendRequest(options, function (err, response) {",
					"        const resp = response.json()",
					"        pm.environment.set('auth0_access_token', resp.access_token);",
					"        pm.environment.set('auth0_access_token_expiration', `${new Date(Date.now())}`);",
					"",
					"    });",
					"}",
					"",
					"console.log(`Exiting PreRequest Script...`)"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:8802"
		},
		{
			"key": "createdUserId",
			"value": "693f01fa-a6ac-4661-bf4c-e75b66850130"
		},
		{
			"key": "testUserEmail",
			"value": "test@sample.com"
		},
		{
			"key": "testUserId",
			"value": ""
		}
	]
}